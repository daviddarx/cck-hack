
<template>
  <div
    v-bind:class="{ 'is-displayed': this.isDisplayed }"
    class="about"
  >
    <div class="content__centered">

      <span class="about__subline subline"> {{about.subline}} </span>

      <h2 class="about__title">
        {{about.title}}
      </h2>

      <img
        :src = about.image
        class="about__img"
      >

      <p class="about__lead">
        {{about.lead}}
      </p>

      <a
        :href = about.cvdoc
        target="_blank"
        class="about__link cta"
      >
        {{about.cvlabel}}
      </a>

      <h3 class="about__subtitle subline">
        {{about.positionstitle}}
      </h3>

      <div class="about__positions">
        <div
          v-for="position in about.positions"
          v-bind:key="position.title"
          class="about__position"
        >
          <h4 class="about__position-title">
            {{position.agency}}

            <span class="about__position-dates subline">
              {{position.dates}}
            </span>
          </h4>
          <div
            class="about__position-desc"
            v-html="getHTMLfromMD(position.description)"
          >
          </div>
        </div>
      </div>

      <h3 class="about__subtitle subline">
        {{about.languagestitle}}
      </h3>

      <div class="about__languages">
        <div
          v-for="language in about.languages"
          v-bind:key="language.title"
          ref="language"
          class="about__language"
        >
          <span class="about__language-title">
            {{language.language}}
          </span>
          <div class="about__language-value value">
            {{language.level}}
          </div>
        </div>
      </div>

      <h3 class="about__subtitle subline">
        {{about.skillstitle}}
      </h3>

      <div class="about__skills">
        <span
          v-for="skill in about.skills"
          v-bind:key="skill.title"
          class="about__skills"

        >
          {{skill.skill}}
        </span>
      </div>

      <h3 class="about__subtitle subline">
        {{about.clientstitle}}
      </h3>

      <p
        v-html="getHTMLfromMD(about.clients)"
        class="about__clients"
      >
      </p>
    </div>

    <custom-footer></custom-footer>
  </div>
</template>

<script>
  import Vue from "vue";
  import CustomFooter from '../footer.vue';
  import contents from '../../contents';
  import getHTMLfromMDMixin from '../../mixins/getHTMLFromMD';

  export default Vue.extend({
    components: {
      'custom-footer': CustomFooter,
    },
    mixins: [getHTMLfromMDMixin],
    data() {
      return {
        about: contents.about,
        isDisplayed : false,
      }
    },
    mounted () {
      setTimeout(this.display, 100);
    },

    methods: {
      display: function () {
        if (this.$parent.isLoaded == true) {
          this.isDisplayed = true;
        }
      }
    }
  });
</script>

